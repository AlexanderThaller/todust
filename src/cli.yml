name: 'todust'

settings:
  - 'SubcommandRequiredElseHelp'

global_settings:
  - 'ColoredHelp'
  - 'GlobalVersion'
  - 'NextLineHelp'
  - 'VersionlessSubcommands'

args:
  - log_level:
      default_value: 'info'
      global: true
      help: 'Loglevel to run under'
      long: 'log_level'
      possible_values: [ 'trace', 'debug', 'info', 'warn', 'error' ]
      short: 'L'
      takes_value: true
      value_name: 'level'
      env: 'TODUST_LOG_LEVEL'

  - datafile_path:
      global: true
      help: 'Path to the datadir'
      long: 'datadir'
      short: 'D'
      takes_value: true
      default_value: '/home/athaller/.local/share/todust/data.sqlite'
      value_name: 'path'
      env: 'TODUST_DATAFILE_PATH'

  - project:
      global: true
      help: 'Which project should be used'
      long: 'project'
      short: 'P'
      takes_value: true
      default_value: 'default'
      value_name: 'project_name'
      env: 'TODUST_PROJECT'

subcommands:
  - add:
      about: 'Start editor and add note'

  - print:
      about: 'Print formatted todos'
      args:
        - entry_id:
            help: 'id of the task. if none is given all tasks will be printed'
            index: 1
            takes_value: true
            value_name: 'id'
        - no_done:
            help: 'dont print done tasks if specified'
            long: 'no_done'
            short: 'n'

  - list:
      about: 'List active todos'

  - done:
      about: 'Mark entry as done'
      args:
        - entry_id:
            help: 'id of the task'
            index: 1
            takes_value: true
            required: true
            value_name: 'id'

  - edit:
      about: 'Open entry in editor'
      args:
        - entry_id:
            help: 'id of the task'
            index: 1
            takes_value: true
            required: true
            value_name: 'id'

        - update_time:
            help: 'update started time of todo to current time if specified'
            long: 'update_time'
            short: 'u'

  - migrate:
      about: 'Migrate old entries to new format'
      args:
        - from_path:
            help: 'path of the file from which to migrate from'
            index: 1
            takes_value: true
            required: true
            value_name: 'path'

  - move:
      about: 'Move entry from current project to target project'
      args:
        - entry_id:
            help: 'id of the task'
            index: 1
            takes_value: true
            required: true
            value_name: 'id'

        - target_project:
            help: 'target project'
            index: 2
            takes_value: true
            required: true
            value_name: 'project_name'

  # FIXME: Disable project flag in this subcommand as it doesnt make sense here.
  - projects:
      about: 'Print all projects saved in todust'
